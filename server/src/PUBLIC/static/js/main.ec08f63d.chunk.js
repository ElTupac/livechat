(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n(8),r=n.n(s),i=n(2),o=n(3),u=n(6),d=n(5),j=n(4),h=(n(14),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props.chatOf,n=this.props.info;return e=t==n.from?"not-me":"me",Object(a.jsx)("div",{children:Object(a.jsx)("p",{className:"message ".concat(e),children:n.mess})})}}]),n}(c.Component)),l=(n(15),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("".concat(this.props.info.chatOf,"-textarea"));t.addEventListener("keydown",(function(n){"Enter"==n.key&&(n.preventDefault(),""!=t.value&&(e.props.enviarMsg(e.props.info.chatOf,t.value),t.value=""))}))}},{key:"render",value:function(){var e=this.props.info.chat,t=this.props.info.chatOf,n=e.map((function(e,n){return Object(a.jsx)(h,{info:e,chatOf:t},"".concat(t,"-").concat(n))}));return Object(a.jsxs)("section",{className:"chat-section",children:[Object(a.jsx)("h2",{className:"title",children:t}),n,Object(a.jsx)("br",{}),Object(a.jsx)("textarea",{id:"".concat(t,"-textarea"),rows:"3",className:"chat-textarea"})]})}}]),n}(c.Component)),f=(n(16),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={socket:void 0,chats:[]},a.enviarMensaje=a.enviarMensaje.bind(Object(u.a)(a)),a}return Object(o.a)(n,[{key:"enviarMensaje",value:function(e,t){var n=this.props.creds,a=n.name,c=n.id,s={from:"".concat(a,"#").concat(c),to:e,mess:t};this.state.socket.send(JSON.stringify(s)),this.addMessage(JSON.stringify(s),!0)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.creds,n=t.name,a=t.id;if(n&&a){var c=new WebSocket("ws://186.13.4.194:4000/?id=".concat(a,"&name=").concat(n));c.onopen=function(t){console.log("Conectado"),e.setState({socket:c}),document.getElementById("enviar-btn").addEventListener("click",(function(t){var n=document.getElementById("para").value,a=document.getElementById("texto").value;n&&a&&e.enviarMensaje(n,a)}))},c.onmessage=function(t){e.addMessage(t.data,!1)}}}},{key:"addMessage",value:function(e,t){var n,a=JSON.parse(e),c=a.from,s=a.to,r=a.mess,i=this.state.chats;for(var o in i)if(i[o].chatOf==c||i[o].chatOf==s){n=o;break}n?i[n].chat.push({from:c,to:s,mess:r}):i.push({chatOf:t?s:c,chat:[{from:c,to:s,mess:r}]}),this.setState({chats:i})}},{key:"render",value:function(){var e=this,t=this.state.chats.map((function(t){return Object(a.jsx)(l,{info:t,enviarMsg:e.enviarMensaje},t.chatOf)}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",id:"para",placeholder:"Destinatario"}),Object(a.jsx)("br",{}),Object(a.jsx)("textarea",{id:"texto",cols:"30",rows:"5",placeholder:"Mensaje"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{id:"enviar-btn",children:"Enviar"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"chats-container",children:t})]})}}]),n}(c.Component)),b=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("crear-btn").addEventListener("click",(function(t){var n=document.getElementById("name").value;n&&fetch("http://186.13.4.194:4000/newid/".concat(n)).then((function(e){return e.json()})).then((function(t){t.error?console.log(t.error):e.props.creds(t.creds.name,t.creds._id)}))}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",id:"name"}),Object(a.jsx)("button",{id:"crear-btn",children:"Crear"})]})}}]),n}(c.Component),v=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={name:void 0,id:void 0},a.setCredentials=a.setCredentials.bind(Object(u.a)(a)),a}return Object(o.a)(n,[{key:"setCredentials",value:function(e,t){this.setState({name:e,id:t})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.id;if(t||n){var c={name:t,id:n};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"".concat(t,"#").concat(n)}),Object(a.jsx)(f,{creds:c})]})}return Object(a.jsx)(b,{creds:this.setCredentials})}}]),n}(c.Component);r.a.render(Object(a.jsx)(v,{}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ec08f63d.chunk.js.map